// jquery.input version 0.0.0
// https://github.com/DubFriend/jquery.input
// (MIT) 08-04-2014
// Brian Detering <BDeterin@gmail.com> (http://www.briandetering.net/)
!function(a){"use strict";var b=function(b){return a.isArray(b)},c=function(a){return!b(a)&&a instanceof Object},d=function(a){return a instanceof Function},e=function(a){var b=Array.prototype.slice.call(arguments,1);return d(a)?function(){var c=Array.prototype.slice.call(arguments);return a.apply(null,b.concat(c))}:void 0},f=function(b,c){return a.inArray(c,b)},g=function(a,b){return-1!==f(a,b)},h=function(a,b){for(var c in a)a.hasOwnProperty(c)&&b(a[c],c,a)},i=function(a){return a[a.length-1]},j=function(a,b){var c=[];return h(a,function(a,d,e){c.push(b(a,d,e))}),c},k=function(a,b,c){var d={};return h(a,function(a,e,f){e=c?c(e,a):e,d[e]=b(a,e,f)}),d},l=function(a,c,d){return b(a)?j(a,c):k(a,c,d)},m=function(a,b,c){return l(a,function(a){return a[b].apply(a,c||[])})},n=function(){var a,b={};for(a=0;a<arguments.length;a+=1)h(arguments[a],function(a,c){b[c]=a});return b},o=(function(){var a=0;return function(){return a+=1}}(),function(a){a=a||{};var b={};return a.publish=function(a,c){h(b[a],function(a){a(c)})},a.subscribe=function(a,c){b[a]=b[a]||[],b[a].push(c)},a.unsubscribe=function(a){h(b,function(b){var c=f(b,a);-1!==c&&b.splice(c,1)})},a}),p=(function(){var a={},b=function(a){var b,c,d,e="",f="",g=function(){var b=-1!==a.indexOf("#"),c=-1!==a.indexOf("?"),d="";return c&&(d=a.split("?")[1]||"",b&&(d=d.split("#")[0]||"")),e=c?a.split("?")[0]||"":b?a.split("#")[0]||"":a,b&&(f=a.split("#")[1]||""),d?d.split("&"):[]},h=g(a),i={};for(d=0;d<h.length;d+=1)b=h[d].split("=")[0],c=h[d].split("=")[1],i[b]=c;return{url:e||"",hash:f||"",parameters:i}},c=function(a){var b=[];return h(a.parameters,function(c,d){b.push(d+"="+a.parameters[d])}),a.url+(b.length>0?"?"+b.join("&"):"")+(a.hash?"#"+a.hash:"")};return a.get=function(a){return b(a).parameters},a.set=function(a,d){var e=b(a);return e.parameters=n(e.parameters,d),c(e)},a}(),function(b,c,d){return a(b+(d?"-"+d:"")+(c?"-"+c:""))}),q=(e(p,".frm"),function(a,b){var c=o(),d=a.$;return c.getType=function(){throw'implement me (return type. "text", "radio", etc.)'},c.$=function(a){return a?d.find(a):d},c.disable=function(){c.$().prop("disabled",!0),c.publish("isEnabled",!1)},c.enable=function(){c.$().prop("disabled",!1),c.publish("isEnabled",!0)},b.equalTo=function(a,b){return a===b},b.publishChange=function(){var a;return function(d,e){var f=c.get();b.equalTo(f,a)||c.publish("change",{e:d,domElement:e}),a=f}}(),c}),r=function(a,b){var c=q(a,b);return c.get=function(){return c.$().val()},c.set=function(a){c.$().val(a)},c.clear=function(){c.set("")},b.buildSetter=function(a){return function(b){a.call(c,b)}},c},s=function(a,c){a=b(a)?a:[a],c=b(c)?c:[c];var d=!0;return a.length!==c.length?d=!1:h(a,function(a){g(c,a)||(d=!1)}),d},t=function(a){var b={},c=r(a,b);return c.getType=function(){return"button"},c.$().on("change",function(a){b.publishChange(a,this)}),c},u=function(c){var d={},e=r(c,d);return e.getType=function(){return"checkbox"},e.get=function(){var b=[];return e.$().filter(":checked").each(function(){b.push(a(this).val())}),b},e.set=function(c){c=b(c)?c:[c],e.$().each(function(){a(this).prop("checked",!1)}),h(c,function(a){e.$().filter('[value="'+a+'"]').prop("checked",!0)})},d.equalTo=s,e.$().change(function(a){d.publishChange(a,this)}),e},v=function(a){var b={},c=E(a,b);return c.getType=function(){return"email"},c},w=function(b){var c={},d=q(b,c);return d.getType=function(){return"file"},d.get=function(){return i(d.$().val().split("\\"))},d.clear=function(){this.$().each(function(){a(this).wrap("<form>").closest("form").get(0).reset(),a(this).unwrap()})},d.$().change(function(a){c.publishChange(a,this)}),d},x=function(a){var b={},c=r(a,b);return c.getType=function(){return"hidden"},c.$().change(function(a){b.publishChange(a,this)}),c},y=function(b){var c={},d=q(b,c);return d.getType=function(){return"file[multiple]"},d.get=function(){var a,b=d.$().get(0).files||[],c=[];for(a=0;a<(b.length||0);a+=1)c.push(b[a].name);return c},d.clear=function(){this.$().each(function(){a(this).wrap("<form>").closest("form").get(0).reset(),a(this).unwrap()})},d.$().change(function(a){c.publishChange(a,this)}),d},z=function(a){var c={},d=r(a,c);return d.getType=function(){return"select[multiple]"},d.get=function(){return d.$().val()||[]},d.set=function(a){d.$().val(""===a?[]:b(a)?a:[a])},c.equalTo=s,d.$().change(function(a){c.publishChange(a,this)}),d},A=function(a){var b={},c=E(a,b);return c.getType=function(){return"password"},c},B=function(b){var c={},d=r(b,c);return d.getType=function(){return"radio"},d.get=function(){return d.$().filter(":checked").val()||null},d.set=function(b){b?d.$().filter('[value="'+b+'"]').prop("checked",!0):d.$().each(function(){a(this).prop("checked",!1)})},d.$().change(function(a){c.publishChange(a,this)}),d},C=function(a){var b={},c=r(a,b);return c.getType=function(){return"range"},c.$().change(function(a){b.publishChange(a,this)}),c},D=function(a){var b={},c=r(a,b);return c.getType=function(){return"select"},c.$().change(function(a){b.publishChange(a,this)}),c},E=function(a){var b={},c=r(a,b);return c.getType=function(){return"text"},c.$().on("change keyup keydown",function(a){b.publishChange(a,this)}),c},F=function(a){var b={},c=r(a,b);return c.getType=function(){return"textarea"},c.$().on("change keyup keydown",function(a){b.publishChange(a,this)}),c},G=function(a){var b={},c=E(a,b);return c.getType=function(){return"url"},c},H=function(b){var d={},e=b.$,g=b.constructorOverride||{button:t,text:E,url:G,email:v,password:A,range:C,textarea:F,select:D,"select[multiple]":z,radio:B,checkbox:u,file:w,"file[multiple]":y,hidden:x},i=function(b,f){var h=c(f)?f:e.find(f);h.each(function(){var c=a(this).attr("name");d[c]=g[b]({$:a(this)})})},j=function(b,i){var j=[],k=c(i)?i:e.find(i);c(i)?d[k.attr("name")]=g[b]({$:k}):(k.each(function(){a(this).attr("name");-1===f(j,a(this).attr("name"))&&j.push(a(this).attr("name"))}),h(j,function(a){d[a]=g[b]({$:e.find('input[name="'+a+'"]')})}))};if(e.is("input, select, textarea"))if(e.is('input[type="button"], button, input[type="submit"]'))i("button",e);else if(e.is("textarea"))i("textarea",e);else if(e.is('input[type="text"]'))i("text",e);else if(e.is('input[type="password"]'))i("password",e);else if(e.is('input[type="email"]'))i("email",e);else if(e.is('input[type="url"]'))i("url",e);else if(e.is('input[type="range"]'))i("range",e);else if(e.is("select"))e.is("[multiple]")?i("select[multiple]",e):i("select",e);else if(e.is('input[type="file"]'))e.is("[multiple]")?i("file[multiple]",e):i("file",e);else if(e.is('input[type="hidden"]'))i("hidden",e);else if(e.is('input[type="radio"]'))j("radio",e);else{if(!e.is('input[type="checkbox"]'))throw"invalid input type";j("checkbox",e)}else i("button",'input[type="button"], button, input[type="submit"]'),i("text",'input[type="text"]'),i("password",'input[type="password"]'),i("email",'input[type="email"]'),i("url",'input[type="url"]'),i("range",'input[type="range"]'),i("textarea","textarea"),i("select","select:not([multiple])"),i("select[multiple]","select[multiple]"),i("file",'input[type="file"]:not([multiple])'),i("file[multiple]",'input[type="file"][multiple]'),i("hidden",'input[type="hidden"]'),j("radio",'input[type="radio"]'),j("checkbox",'input[type="checkbox"]');return d};a.fn.inputVal=function(b){var c=a(this),d=H({$:c});return c.is("input, textarea, select")?"undefined"==typeof b?d[c.attr("name")].get():(d[c.attr("name")].set(b),c):"undefined"==typeof b?m(d,"get"):(h(b,function(a,b){d[b].set(a)}),c)},a.fn.inputOnChange=function(b){var c=a(this),d=H({$:c});return h(d,function(a){a.subscribe("change",function(a){b.call(a.domElement,a.e)})}),c},a.fn.inputDisable=function(){m(H({$:a(this)}),"disable")},a.fn.inputEnable=function(){m(H({$:a(this)}),"enable")}}(jQuery);