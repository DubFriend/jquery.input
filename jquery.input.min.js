// jquery.input version 0.0.0
// https://github.com/DubFriend/jquery.input
// (MIT) 31-03-2014
// Brian Detering <BDeterin@gmail.com> (http://www.briandetering.net/)
!function(a){"use strict";var b=function(b){return a.isArray(b)},c=function(a){return!b(a)&&a instanceof Object},d=function(a){return a instanceof Function},e=function(a){var b=Array.prototype.slice.call(arguments,1);return d(a)?function(){var c=Array.prototype.slice.call(arguments);return a.apply(null,b.concat(c))}:void 0},f=function(b,c){return a.inArray(c,b)},g=function(a,b){for(var c in a)a.hasOwnProperty(c)&&b(a[c],c,a)},h=function(a){return a[a.length-1]},i=function(a,b){var c=[];return g(a,function(a,d,e){c.push(b(a,d,e))}),c},j=function(){var a,b={};for(a=0;a<arguments.length;a+=1)g(arguments[a],function(a,c){b[c]=a});return b},k=function(a,b,c){var d=null,e=!1;return function(){var f=this,g=arguments;null===d?(d=setTimeout(function(){(!c||e)&&b.apply(f,g),e=!1,d=null},a),c&&b.apply(f,g)):e=!0}},l=(function(){var a=0;return function(){return a+=1}}(),function(a){a=a||{};var b={};return a.publish=function(a,c){g(b[a],function(a){a(c)})},a.subscribe=function(a,c){b[a]=b[a]||[],b[a].push(c)},a.unsubscribe=function(a){g(b,function(b){var c=f(b,a);-1!==c&&b.splice(c,1)})},a}),m=(function(){var a={},b=function(a){var b,c,d,e="",f="",g=function(){var b=-1!==a.indexOf("#"),c=-1!==a.indexOf("?"),d="";return c&&(d=a.split("?")[1]||"",b&&(d=d.split("#")[0]||"")),e=c?a.split("?")[0]||"":b?a.split("#")[0]||"":a,b&&(f=a.split("#")[1]||""),d?d.split("&"):[]},h=g(a),i={};for(d=0;d<h.length;d+=1)b=h[d].split("=")[0],c=h[d].split("=")[1],i[b]=c;return{url:e||"",hash:f||"",parameters:i}},c=function(a){var b=[];return g(a.parameters,function(c,d){b.push(d+"="+a.parameters[d])}),a.url+(b.length>0?"?"+b.join("&"):"")+(a.hash?"#"+a.hash:"")};return a.get=function(a){return b(a).parameters},a.set=function(a,d){var e=b(a);return e.parameters=j(e.parameters,d),c(e)},a}(),function(b,c,d){return a(b+(d?"-"+d:"")+(c?"-"+c:""))}),n=(e(m,".frm"),function(a){var b=l(),c=a.$;return b.getType=function(){throw'implement me (return type. "text", "radio", etc.)'},b.$=function(a){return a?c.find(a):c},b.disable=function(){b.$().prop("disabled",!0),b.publish("isEnabled",!1)},b.enable=function(){b.$().prop("disabled",!1),b.publish("isEnabled",!0)},b}),o=function(a,b){var c=n(a,b);return c.get=function(){return c.$().val()},c.set=function(a){c.$().val(a)},c.clear=function(){c.set("")},b.buildSetter=function(a){return function(b){var d=c.get();d!==b&&(a.call(c,b),c.publish("change",c))}},c},p=function(c){var d={},e=o(c,d);return e.getType=function(){return"checkbox"},e.get=function(){var b=[];return e.$().filter(":checked").each(function(){a(this).is(":checked")&&b.push(a(this).val())}),b},e.set=function(c){c=b(c)?c:[c];var d=e.get(),h=!1;d.length===c.length?g(d,function(a){-1===f(c,a)&&(h=!0)}):h=!0,h&&(e.$().each(function(){a(this).prop("checked",!1)}),g(c,function(a){e.$().filter('[value="'+a+'"]').prop("checked",!0)}),e.publish("change",c))},e.$().click(function(){e.publish("change",e)}),e},q=function(b){var c={},d=n(b,c);return d.getType=function(){return"file"},d.get=function(){return h(d.$().val().split("\\"))},d.clear=function(){this.$().each(function(){a(this).wrap("<form>").closest("form").get(0).reset(),a(this).unwrap()})},d.$().change(function(){d.publish("change",d)}),d},r=function(a){var b={},c=o(a,b);return c.getType=function(){return"hidden"},c.$().keyup(function(){c.publish("change",c)}),c},s=function(a){var b={},c=o(a,b);return c.getType=function(){return"radio"},c.get=function(){return c.$().filter(":checked").val()||null},c.set=b.buildSetter(function(a){a?c.$().filter('[value="'+a+'"]').prop("checked",!0):c.$().prop("checked",!1)}),c.$().change(function(){c.publish("change",c)}),c},t=function(a){var b={},c=o(a,b);return c.getType=function(){return"range"},c.$().change(function(){c.publish("change",c)}),c},u=function(a){var b={},c=o(a,b);return c.getType=function(){return"select"},c.$().change(function(){c.publish("change",c)}),c},v=function(a){var b={},c=o(a,b);return c.getType=function(){return"text"},c.$().keyup(k(200,function(){c.publish("change",c)})),c},w=function(a){var b={},c=o(a,b);return c.getType=function(){return"textarea"},c.$().keyup(k(200,function(){c.publish("change",c)})),c},x=function(b){var d={};constructor={text:v,textarea:w,select:u,radio:s,checkbox:p,file:q,button:createInputButton,hidden:r,range:t};var e=function(e,f,g){g=g||d;var h=c(f)?f:b.find(f);h.each(function(){var b=a(this).attr("name");g[b]=constructor[e]({$:a(this)})})},h=function(e,h){var i=[],j=c(h)?h:b.find(h);j.each(function(){-1===f(i,a(this).attr("name"))&&i.push(a(this).attr("name"))}),g(i,function(a){d[a]=constructor[e]({$:b.find('input[name="'+a+'"]')})})};if(b.is("input, select, textarea"))if(b.is('input[type="text"]'))e("text",b);else if(b.is('input[type="password"]'))e("text",b);else if(b.is('input[type="email"]'))e("text",b);else if(b.is('input[type="url"]'))e("text",b);else if(b.is('input[type="range"]'))e("range",b);else if(b.is("select"))b.is("[multiple]")?e("select",b):e("select",b);else if(b.is('input[type="file"]'))b.is("[multiple]")?e("file",b):e("file",b);else if(b.is('input[type="hidden"]'))e("hidden",b);else if(b.is('input[type="radio"]'))h("radio",b);else{if(!b.is('input[type="checkbox"]'))throw"invalid input type";h("checkbox",b)}else e("text",'input[type="text"]'),e("text",'input[type="password"]'),e("text",'input[type="email"]'),e("text",'input[type="url"]'),e("range",'input[type="range"]'),e("textarea","textarea"),e("select","select"),e("file",'input[type="file"]'),e("button",'input[type="button"], input[type="submit"]'),e("hidden",'input[type="hidden"]'),h("radio",'input[type="radio"]'),h("checkbox",'input[type="checkbox"]');return d};a.fn.inputVal=function(b){{var c=a(this);x(c)}},a.fn.inputChange=function(b){var c=a(this),d=x(c);return g(d,function(a){a.subscribe("change",b)}),c},a.fn.inputDisable=function(){},a.fn.inputEnable=function(){}}(jQuery);